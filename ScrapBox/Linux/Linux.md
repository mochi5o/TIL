# [新しいLinuxの教科書](https://www.amazon.co.jp/dp/B072K1NH76/ref=dp-kindle-redirect?_encoding=UTF8&btkr=1)

## [Scrapboxにまとめている](https://scrapbox.io/moch/%E6%96%B0%E3%81%97%E3%81%84Linux%E3%81%AE%E6%95%99%E7%A7%91%E6%9B%B8)

## 2/23

### 第8章までやってみて感想

- パスを通す、の意味がわかった
  - なぜ分かったかというと、コマンドがファイルのパスを指しているということが分かったから
  - コマンドを打った時に実行される内容＝指定されたパスのファイルの中のスクリプト、ということ
- Linuxはコマンドを指定されたら、決まった場所にファイルを探しに行く
  - そこにコマンドのファイルがなかったら、`command not found` となる
  - なのでコマンドのファイルのありか＝探しに行く場所、を予め指定しておいてあげる
  - これが、**パスを通す** ということ

### 8章 気になったこととか感想

- [bashのカスタマイズ](https://scrapbox.io/moch/bash%E3%81%AE%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA)
- プロンプトの変更（シェル変数 PS1の設定）
  - こんなところまで変更できるのか、という感じ、面白い
  - `PS1='bash>> '` とするといつもは$のところが、bash>> に変わる
  - シェルの再起動したら消えた→シェル変数だから

- 環境変数を確認（printenv）
  - この環境変数の中に、`LS_COLORS=`という設定でlsコマンドの結果の色つけの設定が入っているのを発見
- 設定ファイル
  - ~/.bashrc に大体の設定は書いておけばOK
  - `source ~/.bashrc`のコマンドで設定の反映
  - よく使っていたコマンドの意味がだんだん分かってきた
  - 点と点が繋がっていく感じ、面白い

### 9章 気になったこととか感想

- [ファイルのオーナーとパーミッション](https://scrapbox.io/moch/%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E3%82%AA%E3%83%BC%E3%83%8A%E3%83%BC%E3%81%A8%E3%83%91%E3%83%BC%E3%83%9F%E3%83%83%E3%82%B7%E3%83%A7%E3%83%B3)
- ファイルパーミッションが整理できた
  - よく使う　755＝実行ファイル、644＝読み込み可能ファイル
- スーパーユーザーに変更するsuコマンド
  - vagrant環境では初期設定されているので、password聞かれたら `vagrant` でsuが実行できる
  - プロンプトが＃だったらスーパーユーザーの状態
- sudoコマンドの設定は注意深く行う
  - 単純にviなどで開かない、必ずvisudoコマンドで sudeoersファイルを編集する
  - 文法上の誤りを指摘してくれる（間違った記載があると誰もsudo実行できなくなる）

### 10章 気になったこととか感想

- [プロセスとジョブ](https://scrapbox.io/moch/%E3%83%97%E3%83%AD%E3%82%BB%E3%82%B9%E3%81%A8%E3%82%B8%E3%83%A7%E3%83%96)
- psコマンドはDockerで使っていたがプロセスの略だと分かった
- ジョブとプロセスが異なるということ
- ジョブの制御機能を上手く使いこなす＝様々な作業を並行して効率よく実行できる
  - 並行して作業する時の具体的な例がもっと出てくると使いそう
  - まだあまりイメージ湧かないかも

### 11章 気になったこととか感想

- catコマンドの動作の違い
  - 標準入力を使って指定してあげるやり方が本来のcat
- /dev/nullの使い方
  - 不要なメッセージ以外を画面に出力したい時とかに使える
  - ブラックホールっぽい
- パイプラインこそLinuxの真骨頂
  - シンプルなコマンドをパイプラインで繋いでのぞみ通りの結果を得る
- フィルタとは、標準入力を入力として受け取り標準出力に出力するコマンドのこと
  - head, tail, cat, grep, sort, uniq, tac, wc

### 12章 気になったこととか感想

- sort->uniq->sortとパイプでつなげて、並べ替え→重複を排除→件数順に並べ替え、など組み合わせ方がたくさんありそう
- 処理に応じて、どのコマンドとどのオプションで実現できるかを意識しながらやりたい
- [catコマンドとcutの組み合わせ](https://gist.github.com/mochi5o/e22e7f1bc52cce67184bd16503835483)
- trで文字の置換
  - 引数で二つ以上の連続した文字列を渡しても、各文字ごとに置換されているので注意
  - cat /etc/passwd | tr abc ABC` ・・・この場合、a=>A, b=>B, c=>C と置き換える処理
  - **trは1文字単位の置換なので、文字列の置換には別のコマンドを使うこと**
  - `tr 置換前の文字 置換後の文字`、`tr -d 削除文字`
- tailコマンド
  - `tail -f ファイル名`　＝ファイルの変更を監視する
  - よく使いそう
- diffコマンド
  - 差分の読み方に慣れないといけない
  - `diff -u 比較元のファイル 比較先のファイル`　で出すのが一般的
  - 取得した差分はpatchコマンドでパッチを当てることができるらしい

### 13章 気になったこととか感想

- [grepの練習](https://gist.github.com/mochi5o/1f7de3b76c102277b09c3714dadd0840)
- 正規表現と拡張正規表現の違い、あまり分からないが拡張正規表現はあまり意識しなくて良さそう

### 14章

- [sedコマンド](https://scrapbox.io/moch/sed%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89)
- [awkコマンド](https://scrapbox.io/moch/awk%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89)
- この辺りは全部覚えられないのでなんとなく使い所を知っておく感じ
- シェルスクリプトっぽくなってきた！！

### 15章

- [シェルスクリプト基本](https://scrapbox.io/moch/%E3%82%B7%E3%82%A7%E3%83%AB%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%81%AE%E5%9F%BA%E6%9C%AC)
- シェルスクリプトの実行方法による動作の違いの確認
- sourceコマンドの理解が深まったのと、シェルスクリプトの実行方法にも種類があることがわかった

### 16章

- [シェルスクリプトの文法](https://scrapbox.io/moch/%E3%82%B7%E3%82%A7%E3%83%AB%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%81%AE%E6%96%87%E6%B3%95)
- 変数の宣言を間違えそう
  - ＄が不要
  - ＝の前後にスペースを空けない
  - **アルファベット、数字、_だけしか使えない**
- if文で`[]`の前後にスペースが入ったらダメ
  - ifの後ろに奥にはコマンドであり、条件式ではない
  - コマンド実行結果が真であるか偽であるかで条件分岐される
  - 最後はfiで閉じる
  - elseifではなくelif
- 条件式の考え方＝ifの後ろのコマンドが真か偽かを判定している
  - `-n str1`　str1が空文字ではない
  - `-z str1`　str1が空文字である
  - 空文字の判定は便利
  - 評価演算子（<,>みたいな）もある

### シェルスクリプトの活用

- シェルスクリプトの欠点
  - 型がない、オブジェクト指向プログラミングができない＝大規模システムに向かない
  - 1行ずつ実行される＝子プロセスが大量に発生することになるので速度が低い
    - RubyやPerlを使うとよい

### 17章

- `local filepath=$1` ローカル変数の宣言
- 最長マッチで前方一致した部分を取り除く　`${変数名##パターン}`
- `xargs` 標準入力からコマンドラインを組み立てて実行する
  - 標準入力として引数のリストを与える

### 19章

- gitのこと
  - ほとんど知っている内容だったので改めてtigとかで調べてみた
  - [gitの使い方](https://scrapbox.io/moch/git%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9)
  - tigを使いこなすとコマンドラインでずっと操作ができるので良さそう
  - いつも忘れてしまうコマンドだけ少しメモした

### 20章

- [パッケージ管理について](https://scrapbox.io/moch/%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E7%AE%A1%E7%90%86)
  - yumとapt-getのこと

## 第2章

### 変数のスコープ

- 変数のスコープは3種類
  - ローカルスコープ（関数内スコープ）
  - グローバルスコープ
  - スーパーグローバル

### ローカルスコープを活用するコツ

- 関数を上手く使うこと
- 長く生存する変数をできるだけ減らす
- 大きすぎる関数を作らない
- 適度に関数分割を行う

### グローバルとスーパーグローバル

- グローバルスコープは変数の生存期間が長くなってしまうのであまり推奨されない
- global宣言は使わない
  - 関数の中からグローバル変数を使うことができる仕組み
  - よほどのことがない限り使わない方が良い
- スーパーグローバルは `$_XXX` というやつでPHPが用意している
  - 重要な変数なので安易に書き換えない（$_COOKIEや$_SESSIOMなど書き換える前提の変数を除く）

### セッションの保存

- 保存先はいくつかある、session_set_dave_handler()で変更できる
  - ファイルに保存する
  - DBに保存
  - RedisやMencacheなどのKVS（キーバリューストア）に保存
  - クッキーに暗号化して保存

### マジック定数

- [マジック定数（マニュアル）](https://www.php.net/manual/ja/language.constants.predefined.php)
  - 使われる場所によって値が変化する定数（マジカル定数）が9つある
  - デバッグなどに便利

## 第3章

### 型変換

- 暗黙的型変換
- 明示的型変換
  - (int)XXX, (bool)XXX みたいな書き方
  - intval(XXX), boolval(XXX) みたいな書き方
- 緩やかな比較と厳密な比較
  - 緩やかな比較が発生するケース
    ─「==」による比較
    ─「!=」と「<>」による比較
    ─switch文
  - 厳密な比較が発生するケース
    ─「===」による比較
    ─「!==」による比較
- 文字列の０を判定に使いたい

```
// 文字列の長さで判定する
if(strlen($d)>0){
  echo"なんらかの文字が入力されています".PHP_EOL;
}
```

### なぜ型宣言を使うのか？

- 関数をシンプルに安全に保つ
- 引数の型の無限大のパターンを考慮しなくて良くなる

```
・想定外の引数を受け取るとエラーになるため、不具合を早めに検知できる
・関数の製作者が、引数に求める意図を明示することができる
・型が保証されていることによって、関数の引数チェックを簡易化することができる
・想定外の引数は弾くので、関数の品質を一定に維持できる
```

### 型宣言の特徴

- 関数の引数に対して設定する
  - 通常の変数に型宣言することは出来ないので注意！
- 想定外のパラメータを受け取ると、TypeErrorをスローする
- 型宣言を利用してプログラムの品質向上を考えるなら小さな関数をたくさん作って組み上げる形が良さそう
- ここでもUNIX哲学
  - 小さいものは美しい
  - 各プログラムが一つのことをうまくやるようにせよ
